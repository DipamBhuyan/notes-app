<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notes</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500&family=Roboto:wght@500&display=swap" rel="stylesheet">
    <style>
        body {
            background-image: url('data:image/svg+xml;charset=utf8,%3Csvg id%3D%22visual%22 viewBox%3D%220 0 960 540%22 width%3D%22960%22 height%3D%22540%22 xmlns%3D%22http%3A//www.w3.org/2000/svg%22 xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22 version%3D%221.1%22%3E%3Crect x%3D%220%22 y%3D%220%22 width%3D%22960%22 height%3D%22540%22 fill%3D%22%23001220%22/%3E%3Cpath d%3D%22M0 308L17.8 312.8C35.7 317.7 71.3 327.3 106.8 336.8C142.3 346.3 177.7 355.7 213.2 348.3C248.7 341 284.3 317 320 311.3C355.7 305.7 391.3 318.3 426.8 329.5C462.3 340.7 497.7 350.3 533.2 344.3C568.7 338.3 604.3 316.7 640 319.2C675.7 321.7 711.3 348.3 746.8 355C782.3 361.7 817.7 348.3 853.2 348.2C888.7 348 924.3 361 942.2 367.5L960 374L960 541L942.2 541C924.3 541 888.7 541 853.2 541C817.7 541 782.3 541 746.8 541C711.3 541 675.7 541 640 541C604.3 541 568.7 541 533.2 541C497.7 541 462.3 541 426.8 541C391.3 541 355.7 541 320 541C284.3 541 248.7 541 213.2 541C177.7 541 142.3 541 106.8 541C71.3 541 35.7 541 17.8 541L0 541Z%22 fill%3D%22%23fa7268%22/%3E%3Cpath d%3D%22M0 388L17.8 387.7C35.7 387.3 71.3 386.7 106.8 383.5C142.3 380.3 177.7 374.7 213.2 376C248.7 377.3 284.3 385.7 320 383.8C355.7 382 391.3 370 426.8 363C462.3 356 497.7 354 533.2 359.5C568.7 365 604.3 378 640 380.8C675.7 383.7 711.3 376.3 746.8 369.3C782.3 362.3 817.7 355.7 853.2 360.7C888.7 365.7 924.3 382.3 942.2 390.7L960 399L960 541L942.2 541C924.3 541 888.7 541 853.2 541C817.7 541 782.3 541 746.8 541C711.3 541 675.7 541 640 541C604.3 541 568.7 541 533.2 541C497.7 541 462.3 541 426.8 541C391.3 541 355.7 541 320 541C284.3 541 248.7 541 213.2 541C177.7 541 142.3 541 106.8 541C71.3 541 35.7 541 17.8 541L0 541Z%22 fill%3D%22%23f16367%22/%3E%3Cpath d%3D%22M0 427L17.8 416.5C35.7 406 71.3 385 106.8 382.7C142.3 380.3 177.7 396.7 213.2 406C248.7 415.3 284.3 417.7 320 415C355.7 412.3 391.3 404.7 426.8 395.3C462.3 386 497.7 375 533.2 375.8C568.7 376.7 604.3 389.3 640 395.7C675.7 402 711.3 402 746.8 406.7C782.3 411.3 817.7 420.7 853.2 425.2C888.7 429.7 924.3 429.3 942.2 429.2L960 429L960 541L942.2 541C924.3 541 888.7 541 853.2 541C817.7 541 782.3 541 746.8 541C711.3 541 675.7 541 640 541C604.3 541 568.7 541 533.2 541C497.7 541 462.3 541 426.8 541C391.3 541 355.7 541 320 541C284.3 541 248.7 541 213.2 541C177.7 541 142.3 541 106.8 541C71.3 541 35.7 541 17.8 541L0 541Z%22 fill%3D%22%23e85467%22/%3E%3Cpath d%3D%22M0 409L17.8 411.8C35.7 414.7 71.3 420.3 106.8 423.5C142.3 426.7 177.7 427.3 213.2 431.5C248.7 435.7 284.3 443.3 320 447C355.7 450.7 391.3 450.3 426.8 446C462.3 441.7 497.7 433.3 533.2 427.3C568.7 421.3 604.3 417.7 640 416.3C675.7 415 711.3 416 746.8 420C782.3 424 817.7 431 853.2 428.3C888.7 425.7 924.3 413.3 942.2 407.2L960 401L960 541L942.2 541C924.3 541 888.7 541 853.2 541C817.7 541 782.3 541 746.8 541C711.3 541 675.7 541 640 541C604.3 541 568.7 541 533.2 541C497.7 541 462.3 541 426.8 541C391.3 541 355.7 541 320 541C284.3 541 248.7 541 213.2 541C177.7 541 142.3 541 106.8 541C71.3 541 35.7 541 17.8 541L0 541Z%22 fill%3D%22%23de4467%22/%3E%3Cpath d%3D%22M0 438L17.8 441.8C35.7 445.7 71.3 453.3 106.8 460.7C142.3 468 177.7 475 213.2 476C248.7 477 284.3 472 320 466.3C355.7 460.7 391.3 454.3 426.8 453.8C462.3 453.3 497.7 458.7 533.2 462C568.7 465.3 604.3 466.7 640 469C675.7 471.3 711.3 474.7 746.8 477.2C782.3 479.7 817.7 481.3 853.2 476.3C888.7 471.3 924.3 459.7 942.2 453.8L960 448L960 541L942.2 541C924.3 541 888.7 541 853.2 541C817.7 541 782.3 541 746.8 541C711.3 541 675.7 541 640 541C604.3 541 568.7 541 533.2 541C497.7 541 462.3 541 426.8 541C391.3 541 355.7 541 320 541C284.3 541 248.7 541 213.2 541C177.7 541 142.3 541 106.8 541C71.3 541 35.7 541 17.8 541L0 541Z%22 fill%3D%22%23d23467%22/%3E%3Cpath d%3D%22M0 475L17.8 477.8C35.7 480.7 71.3 486.3 106.8 489.2C142.3 492 177.7 492 213.2 493.8C248.7 495.7 284.3 499.3 320 499C355.7 498.7 391.3 494.3 426.8 494.7C462.3 495 497.7 500 533.2 499.3C568.7 498.7 604.3 492.3 640 490.8C675.7 489.3 711.3 492.7 746.8 492.3C782.3 492 817.7 488 853.2 484.8C888.7 481.7 924.3 479.3 942.2 478.2L960 477L960 541L942.2 541C924.3 541 888.7 541 853.2 541C817.7 541 782.3 541 746.8 541C711.3 541 675.7 541 640 541C604.3 541 568.7 541 533.2 541C497.7 541 462.3 541 426.8 541C391.3 541 355.7 541 320 541C284.3 541 248.7 541 213.2 541C177.7 541 142.3 541 106.8 541C71.3 541 35.7 541 17.8 541L0 541Z%22 fill%3D%22%23c62368%22/%3E%3C/svg%3E');
            background-repeat: no-repeat;
            background-size: cover;
            background-attachment: fixed;
            font-family: 'Roboto', sans-serif;
            color: azure;
            margin: 0;
            padding: 0;
        }
        body.navbar{
            background-color: azure;
            color: #001220;
        }
        body section{
            color: #001220;
        }
        body .modal-header, form{
            color: #001220;
        }
        body footer{
            background-color: #001220;
        }
        .row{
            margin-top:7%;
        }
    </style>
</head>
<body>
    <!--Navbar-->
    <nav class="navbar fixed-top navbar-expand-lg bg-body-tertiary" aria-label="Eleventh navbar example">
        <div class="container-fluid">
          <!--<a class="navbar-brand" href="#"><img src="{{ asset('images/logo.png') }}" alt="Notes" height="40" class="d-inline-block align-text-top rounded-circle px-0 px-md-0  mr-0 mr-md-0"></a>-->
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarsExample09" aria-controls="navbarsExample09" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarsExample09">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="/notes">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/about">About</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" data-toggle="modal" data-target="#contactModal">Contact Us</a>
                </li>
            </ul>
            <form role="search">
              <input class="form-control" type="search" placeholder="Search" aria-label="Search">
            </form>
          </div>
        </div>
    </nav>
    <!--End Navbar-->
    <section class="container py-4">
        <div class="row">
            <div class="col-md-12">
                <article class="border p-3 mb-4">
                    <ul class="nav nav-pills p-3mb-3 align-items-center">
                        <li class="nav-item">
                            <a href="#" class="nav-link btn-primary rounded-pill note-link d-flex align-items-center px-2 px-md-3 mr-0 mr-md-2 active" id="all-category">
                                <i class="icon-layers mr-1"></i><span class="d-none d-md-block">Notes</span>
                            </a>
                        </li>
                        <li class="nav-item ml-auto">
                            <a href="javascript:void(0)" class="nav-link btn-primary rounded-pill d-flex align-items-center px-3" id="add-notes"><span class="d-none d-md-block font-24"><button type="button" class="btn btn-primary rounded-circle" style="width: 40px; height: 40px;" data-toggle="modal" data-target="#myModal"> + </button></span></a>
                        </li>
                    </ul>
                </article>
            </div>
            <div class="col-md-12">
                <article>
                    <!--Create Modal-->
                    <div class="modal fade" id="myModal">
                        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title">Notes</h5>
                                    <button type="button" class="close" data-dismiss="modal">
                                        <span>&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                <form action="{{ route('notes.store') }}" method="POST">
                                        @csrf
                                        <div class="form-group">
                                            <label for="title">Title:</label>
                                            <input type="text" class="form-control" id="title" name="title">
                                        </div>
                                        <div class="form-group">
                                            <label for="description">Description:</label>
                                            <textarea class="form-control" id="description" rows="4" name="description"></textarea>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                            <button type="submit" class="btn btn-primary">Save</button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--End Create Modal-->
                    <!--Edit Modal-->
                    <div class="modal fade" id="editNoteModal" tabindex="-1" role="dialog" aria-labelledby="editNoteModalLabel" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="editNoteModalLabel">Edit Note</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <form id="editNoteForm" method="POST">
                                        @csrf
                                        @method('PUT')
                                        <div class="form-group">
                                            <label for="editTitle">Title</label>
                                            <input type="text" class="form-control" id="editTitle" name="title">
                                        </div>
                                        <div class="form-group">
                                            <label for="editDescription">Description</label>
                                            <textarea class="form-control" id="editDescription" rows="4" name="description"></textarea>
                                        </div>
                                    </form>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                    <button type="button" class="btn btn-primary" onclick="updateNote()">Save Changes</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--End Edit Modal-->
                </article>
            </div>
            <div class="col-md-12">
            <div class="col-md-12">
                <article class="border p-3 mb-4">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th scope="col">#</th>
                                <th scope="col">Title</th>
                                <th scope="col">Description</th>
                                <th scope="col">Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            @php
                            $Index = 1;
                            @endphp
                            @foreach($notes as $note)
                            <tr>
                                <th scope="row">{{ $Index++ }}</th>
                                <td>{{ $note->title }}</td>
                                <td>
                                    {{ \Illuminate\Support\Str::limit(strip_tags($note->description), 50) }}
                                    @if(strlen(strip_tags($note->description)) > 50)
                                        <span class="read-more" data-toggle="modal" data-target="#viewNoteModal{{ $note->id }}"><a href="#">...Read More</a></span>
                                    @endif
                                </td>
                                <td>
                                    <button type="button" class="btn btn-info" data-toggle="modal" data-target="#viewNoteModal{{ $note->id }}">View</button>
                                    <!--View Modal-->
                                    <div class="modal fade" id="viewNoteModal{{ $note->id }}" tabindex="-1" role="dialog" aria-labelledby="viewNoteModalLabel{{ $note->id }}" aria-hidden="true">
                                        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable" role="document">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h5 class="modal-title" id="viewNoteModalLabel{{ $note->id }}">{{ $note->title }}</h5>
                                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                        <span aria-hidden="true">&times;</span>
                                                    </button>
                                                </div>
                                                <div class="modal-body">
                                                    <p>{{ $note->description }}</p>
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!--End View Modal-->
                                    <a href="#" class="btn btn-warning" data-toggle="modal" data-target="#editNoteModal" onclick="openEditModal({{ $note->id }}, '{{ $note->title }}', '{{ $note->description }}')">Edit</a>
                                    <form action="{{ route('notes.destroy', $note->id) }}" method="POST" style="display: inline;">
                                        @csrf
                                        @method('DELETE')
                                        <button type="submit" class="btn btn-danger">Delete</button>
                                    </form>
                                </td>
                            </tr>
                            @endforeach
                        </tbody>
                    </table>
                </article>
            </div>
        </div>
    </section>
    <!--Contact Modal-->
    <div class="modal fade" id="contactModal" tabindex="-1" role="dialog" aria-labelledby="contactModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="contactModalLabel">Contact Us</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form action="{{ route('contact.store') }}" method="POST">
                    @csrf
                    <div class="modal-body">
                        <div class="form-group">
                            <label for="name">Name</label>
                            <input type="text" class="form-control" id="name" name="name">
                        </div>
                        <div class="form-group">
                            <label for="email">Email</label>
                            <input type="email" class="form-control" id="email" name="email">
                        </div>
                        <div class="form-group">
                            <label for="subject">Subject</label>
                            <input type="text" class="form-control" id="subject" name="subject">
                        </div>
                        <div class="form-group">
                            <label for="message">Message</label>
                            <textarea class="form-control" id="message" rows="4" name="message"></textarea>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary">Send Message</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!--End Contact Modal-->
    <footer class="text-center fixed-bottom py-1">
        <p>&copy; 2023 Dipam Bhuyan. All rights reserved.</p>
    </footer>
    <script>
        function openEditModal(id, title, description) {
            // Set the values in the edit note modal
            document.getElementById('editTitle').value = title;
            document.getElementById('editDescription').value = description;

            // Set the action URL for the edit form
            document.getElementById('editNoteForm').action = '/notes/' + id;
        }

        function updateNote() {
            // Submit the edit note form
            document.getElementById('editNoteForm').submit();
        }
    </script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
